{"version":3,"sources":["../src/index.ts","../src/primitives.ts","../src/AnimatedStyle.ts","../src/AnimatedTransform.ts"],"sourcesContent":["import { StyleSheet } from 'react-native'\nimport { createHost, AnimatedObject } from '@react-spring/animated'\nimport {\n  is,\n  Globals,\n  createStringInterpolator,\n  colors,\n} from '@react-spring/shared'\nimport { primitives } from './primitives'\nimport { WithAnimated } from './animated'\nimport { AnimatedStyle } from './AnimatedStyle'\n\nGlobals.assign({\n  batchedUpdates: require('react-native').unstable_batchedUpdates,\n  createStringInterpolator,\n  colors,\n})\n\nconst host = createHost(primitives, {\n  applyAnimatedValues(instance, props) {\n    if (is.und(props.children) && instance.setNativeProps) {\n      instance.setNativeProps(props)\n      return true\n    }\n    return false\n  },\n  createAnimatedStyle(styles) {\n    styles = StyleSheet.flatten(styles)\n    if (is.obj(styles.shadowOffset)) {\n      styles.shadowOffset = new AnimatedObject(styles.shadowOffset)\n    }\n    return new AnimatedStyle(styles)\n  },\n})\n\nexport const animated = host.animated as WithAnimated\nexport { animated as a }\n\nexport * from './animated'\nexport * from '@react-spring/core'\n","import {\n  Text,\n  View,\n  Image,\n  ImageProps,\n  ViewProps,\n  TextProps,\n} from 'react-native'\nimport { ComponentClass, ReactNode } from 'react'\n\nexport const primitives = {\n  View: View as ComponentClass<ViewProps & { children?: ReactNode }>,\n  Text: Text as ComponentClass<TextProps & { children?: ReactNode }>,\n  Image: Image as ComponentClass<ImageProps>,\n}\n","import { AnimatedObject } from '@react-spring/animated'\nimport { AnimatedTransform } from './AnimatedTransform'\n\ntype Style = object & { transform?: any }\n\nexport class AnimatedStyle extends AnimatedObject {\n  constructor(style: Style) {\n    super(style)\n  }\n\n  setValue(style: Style) {\n    super.setValue(\n      style && style.transform\n        ? { ...style, transform: new AnimatedTransform(style.transform) }\n        : style\n    )\n  }\n}\n","import { each, eachProp, getFluidValue } from '@react-spring/shared'\nimport { Animated, AnimatedValue, AnimatedObject } from '@react-spring/animated'\n\ntype Transform = { [key: string]: string | number | Animated }\n\ntype Source = Transform[]\n\nexport class AnimatedTransform extends AnimatedObject {\n  protected declare source: Source\n  constructor(source: Source) {\n    super(source)\n  }\n\n  getValue() {\n    return this.source\n      ? this.source.map(source => {\n          const transform: any = {}\n          eachProp(source, (source, key) => {\n            transform[key] = getFluidValue(source)\n          })\n          return transform\n        })\n      : []\n  }\n\n  setValue(source: Source) {\n    this.source = source\n    this.payload = this._makePayload(source)\n  }\n\n  protected _makePayload(source: Source) {\n    if (!source) return []\n    const payload = new Set<AnimatedValue>()\n    each(source, transform => eachProp(transform, this._addToPayload, payload))\n    return Array.from(payload)\n  }\n}\n"],"mappings":"6PAAA,OAAS,cAAAA,MAAkB,eAC3B,OAAS,cAAAC,EAAY,kBAAAC,MAAsB,yBAC3C,OACE,MAAAC,EACA,WAAAC,EACA,4BAAAC,EACA,UAAAC,MACK,uBCPP,OACE,QAAAC,EACA,QAAAC,EACA,SAAAC,MAIK,eAGA,IAAMC,EAAa,CACxB,KAAMF,EACN,KAAMD,EACN,MAAOE,CACT,ECdA,OAAS,kBAAAE,MAAsB,yBCA/B,OAAS,QAAAC,EAAM,YAAAC,EAAU,iBAAAC,MAAqB,uBAC9C,OAAkC,kBAAAC,MAAsB,yBAMjD,IAAMC,EAAN,cAAgCD,CAAe,CAEpD,YAAYE,EAAgB,CAC1B,MAAMA,CAAM,CACd,CAEA,UAAW,CACT,OAAO,KAAK,OACR,KAAK,OAAO,IAAIA,GAAU,CACxB,IAAMC,EAAiB,CAAC,EACxB,OAAAL,EAASI,EAAQ,CAACA,EAAQE,IAAQ,CAChCD,EAAUC,CAAG,EAAIL,EAAcG,CAAM,CACvC,CAAC,EACMC,CACT,CAAC,EACD,CAAC,CACP,CAEA,SAASD,EAAgB,CACvB,KAAK,OAASA,EACd,KAAK,QAAU,KAAK,aAAaA,CAAM,CACzC,CAEU,aAAaA,EAAgB,CACrC,GAAI,CAACA,EAAQ,MAAO,CAAC,EACrB,IAAMG,EAAU,IAAI,IACpB,OAAAR,EAAKK,EAAQC,GAAaL,EAASK,EAAW,KAAK,cAAeE,CAAO,CAAC,EACnE,MAAM,KAAKA,CAAO,CAC3B,CACF,ED/BO,IAAMC,EAAN,cAA4BC,CAAe,CAChD,YAAYC,EAAc,CACxB,MAAMA,CAAK,CACb,CAEA,SAASA,EAAc,CACrB,MAAM,SACJA,GAASA,EAAM,UACX,CAAE,GAAGA,EAAO,UAAW,IAAIC,EAAkBD,EAAM,SAAS,CAAE,EAC9DA,CACN,CACF,CACF,EFsBA,WAAc,qBA3BdE,EAAQ,OAAO,CACb,eAAgB,EAAQ,cAAc,EAAE,wBACxC,yBAAAC,EACA,OAAAC,CACF,CAAC,EAED,IAAMC,EAAOC,EAAWC,EAAY,CAClC,oBAAoBC,EAAUC,EAAO,CACnC,OAAIC,EAAG,IAAID,EAAM,QAAQ,GAAKD,EAAS,gBACrCA,EAAS,eAAeC,CAAK,EACtB,IAEF,EACT,EACA,oBAAoBE,EAAQ,CAC1B,OAAAA,EAASC,EAAW,QAAQD,CAAM,EAC9BD,EAAG,IAAIC,EAAO,YAAY,IAC5BA,EAAO,aAAe,IAAIE,EAAeF,EAAO,YAAY,GAEvD,IAAIG,EAAcH,CAAM,CACjC,CACF,CAAC,EAEYI,EAAWV,EAAK","names":["StyleSheet","createHost","AnimatedObject","is","Globals","createStringInterpolator","colors","Text","View","Image","primitives","AnimatedObject","each","eachProp","getFluidValue","AnimatedObject","AnimatedTransform","source","transform","key","payload","AnimatedStyle","AnimatedObject","style","AnimatedTransform","Globals","createStringInterpolator","colors","host","createHost","primitives","instance","props","is","styles","StyleSheet","AnimatedObject","AnimatedStyle","animated"]}